<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Posts</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>Posts</h1>
    <form method="post" action="/posts">
        <input type="text" name="title" placeholder="Title" required>
        <br>
        <textarea name="content" placeholder="Content" required></textarea>
        <br>
        <button type="submit">Create Post</button>
    </form>
    <hr>
    {{range .}}
    <article>
        <h2>{{.Title}}</h2>
        <p>{{.Content}}</p>
        <p><em>by {{.Author.Username}}</em></p>
        <form method="post" action="/like" style="display:inline;">
            <input type="hidden" name="post_id" value="{{.ID}}">
            <button type="submit">👍 {{len .Likes}}</button>
        </form>
        <form method="post" action="/dislike" style="display:inline;">
            <input type="hidden" name="post_id" value="{{.ID}}">
            <button type="submit">👎 {{len .DisLikes}}</button>
        </form>
        <div>
            <h3>Comments ({{len .Comments}})</h3>
            <ul>
                {{range .Comments}}
                <li><strong>{{.Author.Username}}:</strong> {{.Content}}</li>
                {{end}}
            </ul>
            <form method="post" action="/comment">
                <input type="hidden" name="post_id" value="{{.ID}}">
                <input type="text" name="content" placeholder="Add comment" required>
                <button type="submit">Comment</button>
            </form>
        </div>
    </article>
    <hr>
    {{end}}
</body>
</html>
